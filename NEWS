NEWS for rsync 2.6.5 (UNRELEASED)
Protocol: 29 (unchanged)
Changes since 2.6.4:

  OUTPUT CHANGES:

    - Non-printable chars in filenames are now output using backslash-
      escaped characters rather than '?'s.  Any non-printable character is
      output using 3 digits of octal (e.g. "\n" -> "\012"), and a backslash
      is now output as "\\".  Rsync also uses your locale setting, which
      should make it treat fewer high-bit characters as non-printable, as
      appropriate.

  BUG FIXES:

    - A crash bug was fixed when a daemon had its "path" set to "/", did
      not have chroot enabled, and used some anchored excludes in the
      rsyncd.conf file.

    - Fixed a bug in the transfer of a single file when -H is specified
      that might have caused an infinite loop or perhaps a crash.

    - Fixed a case where the generator might try to tweak the write
      permissions of a read-only directory in list-only mode.

    - If --compare-dest or --link-dest uses a locally-copied file as the
      basis for an updated version, log this better when --verbose or -i
      is in effect.

    - Fixed the accidental disabling of --backup during the --delete-after
      processing.

    - Restored the ability to use the --address option in client mode (in
      addition to its use in daemon mode).

    - Make sure that some temporary progress information from the delete
      processing does not get left on the screen when it is followed by a
      newline.

    - When --existing skips a directory with extra verbosity, don't refer
      to it as a "file".

    - When transferring a single file to a different-named file, any
      generator messages that are source-file related no longer refer to
      the file by the destination filename.

    - Fixed a bug where hard-linking a group of files might fail if the
      generator hasn't created the destination directory yet.

    - Fixed a bug where a hard-linked group of files that is newly-linked
      to a file in a --link-dest dir doesn't link the files from the rest
      of the cluster.

    - When deleting files with the --one-file-system (-x) option set, rsync
      no longer tries to remove files from inside a mount-point on the
      receiving side.

    - Fixed a compatibility problem when using --cvs-ignore (-C) and
      sending files to an older rsync without using --delete.

  ENHANCEMENTS:

    - Added the --only-write-batch=FILE option that may be used (instead
      of --write-batch=FILE) to create a batch file without doing any
      actual updating of the destination.  This allows you to divert all
      the file-updating data away from a slow data link (as long as you
      are pushing the data to the remote server when creating the batch).

    - When the generator is taking a long time to fill up its output buffer
      (e.g. if the transferred files are few, small, or missing), it now
      periodically flushes the output buffer so that the sender/receiver
      can get started on the files sooner rather than later.

    - Improved the auth-errors that are logged by the daemon to include
      some information on why the authorization failed (wrong user,
      password mismatch, etc.).  (The client-visible message is unchanged.)

    - Improved the client's handling of an "@ERROR" from a daemon so that
      it does not complain about an unexpectedly closed socket (since we
      really did expect the socket to close).

    - If the daemon can't open the log-file specified in rsyncd.conf, fall
      back to using syslog.  This is better than a (typically) totally
      silent failure (since a daemon is not usually run with --no-detach).

  INTERNAL:

    - Rsync now calls setlocale(LC_CTYPE, "").

  BUILD CHANGES:

    - Fixed a bug in the SUPPORT{,_HARD}_LINKS defines which prevented
      rsync from being built without symlink or hard-link support.

    - You can use --disable-locale to turn off any use of setlocale().

    - Configure now disables the use of mkstemp() under HP-UX (since they
      refuse to fix its broken handling of large files).

    - Configure now explicitly checks for the lseek64() function so that
      the code can use HAVE_LSEEK64 instead of inferring lseek64()'s
      presence based on the presence of the off64_t type.
