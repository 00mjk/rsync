NEWS for rsync 2.6.3 (UNRELEASED)
Protocol: 28 (unchanged)
Changes since 2.6.2:

  BUG FIXES:

    - Fixed a crash bug that might appear when --delete was used and
      multiple source directories were specified.

    - The --backup code no longer attempts to create some directories
      over and over again (generating warnings along the way).

    - Fixed a bug in the reading of the secrets file (by the daemon) and
      the password file (by the client):  the files no longer need to be
      terminated by a newline for their content to be read in.

    - If a file has a read error on the sending side, the receiver will
      no longer keep the resulting file unless the --partial option was
      specified.  (Note:  both sides must be running 2.6.3 for this to
      work -- older receivers always keep the file, and older senders
      don't tell the receiver that the file was not read correctly.)

    - If a file gets resent in a single transfer and the --backup option
      is enabled, rsync no longer performs a duplicate backup (losing the
      original file in the process).

    - Fixed an age-old crash problem with --read-batch on a local copy
      (rsync was improperly assuming --whole-file for the local copy).

    - Files specified in the daemon's "exclude" or "exclude from" config
      items are now excluded from being uploaded (assuming that the module
      allows uploading at all) in addition to the old download exclusion.

    - Got rid of a potential hang in the receiver when near the end of a
      phase.

    - When using --backup without a --backup-dir, rsync no longer preserves
      the modify time on directories.  This avoids confusing NFS.

    - When --copy-links (-L) is specified, we now output a separate error
      for a symlink that has no referent instead of claiming that a file
      "vanished".

    - Error messages from the daemon server's option-parsing (such as
      refused options) now get sent back to the client (the server used
      to just exit because the socket wasn't in the right state to send
      the message).

    - Most errors that occur during a daemon transfer are now returned to
      the user in addition to being logged (some messages are intended to
      be daemon-only).

    - Fixed a bug in the daemon authentication code when using one of the
      batch-processing options.

  ENHANCEMENTS:

    - Added --keep-dirlinks (-K), which allows you to symlink a directory
      onto another patition on the receiving side and have rsync treat it
      as matching a normal directory from the sender.

    - Added the "write only" option to the daemon's config file.

    - Added long-option names for -4 and -6 (namely --ipv4 and --ipv6)
      and documented all these options in the man page.

    - If the daemon get an address-in-use error starting up, we sometimes
      suggest that the user specify --ipv4 or --ipv6 to work around their
      buggy socket implementation.

    - Improved the handling of the --bwlimit option so that it's less
      bursty, more accurate, and works properly over a larger range of
      values.

    - The rsync daemon-over-ssh code now looks for SSH_CONNECTION and
      SSH2_CLIENT in addition to SSH_CLIENT to figure out the IP address.

    - Added the --checksum-seed=N option for advanced users.

  INTERNAL:

    - Some cleanup in the exclude code has saved some per-exclude memory
      and made the code easier to maintain.

    - Use rsyserr() in the various places that were still calling
      rprintf() with strerror() as an arg.

    - If an rsync daemon is listening on multiple sockets (to handle both
      IPv4 and IPv6 to a single port), we now close all the unneeded file
      handles after we accept a connecton (we used to close just one of
      them).

  BUILD CHANGES:

    - Added a "gen" target to rebuild most of the generated files,
      including configure, config.h.in, the man pages, and proto.h.

    - If "make proto" doesn't find some changes in the prototypes, the
      proto.h file is left untouched (its timestamp used to always be
      updated).

    - The variable $STRIP (that is optionally set by the install-strip
      target's rule) was changed to $INSTALL_STRIP because some systems
      have $STRIP set in the environment.

  DEVELOPER RELATED:

    - The scripts in the testsuite dir were cleaned up a bit.

    - Some new diffs were added to the patches dir, and some accepted
      ones were removed.

