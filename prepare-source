#!/bin/sh
# Use autoconf and autoheader to create configure.sh and config.h.in.
# If unsuccessful and the "fetch" option was provided, grab the latest
# development versions of these files (only useful with a dev checkout).
dir=`dirname $0`
if test x"$dir" != x -a x"$dir" != x.; then
    cd "$dir"
fi
if make -f prepare-source.mak; then
    :
elif test x"$1" = x"fetch"; then
    if perl --version >/dev/null 2>/dev/null; then
	files='c*'
    else
	files='[cp]*'
    fi
    rsync -pvz rsync://rsync.samba.org/rsyncftp/generated-files/"$files" .
elif test x"$1" = x"fetchall"; then
    rsync -pvz rsync://rsync.samba.org/rsyncftp/generated-files/'*' .
else
    exit 1
fi
